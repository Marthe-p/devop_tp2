language: java
script:
  #Test and build your app with docker
  - mvn clean verify --file simple-api/pom.xml

  #Connexion Ã  Docker
  - docker login -u $dockerhub_id -p $dockerhub_pwd
  - docker built -t $dockerhub_id/devop_tp2-main_database database
  - docker built -t $dockerhub_id/devop_tp2-main_httpd httpd
  - docker built -t $dockerhub_id/devop_tp2-main_simple-api simple-api
  #Publication des images
  - docker push $dockerhub_id/devop_tp2-main_database
  - docker push $dockerhub_id/devop_tp2-main_httpd
  - docker push $dockerhub_id/devop_tp2-main_simple-api

cache:
  - $HOME/.m2

services:
  - docker
